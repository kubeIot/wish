<div class="main-content">
    <div class="container-fluid">

        <div class="col-md-3" >
            <a class="pointer"  (click)="goBack()">
                <span class="icon-back"><span><i class="pe-icon pe-7s-angle-left pe-icon-back"></i>Go Back</span></span>
            </a>
        </div>

        <div class="col-md-12 col-sm-12 col-xs-12" [@newapplication]>
            <div class="card">
                <div class="header">
                    <h4 class="title">Add Device</h4>
                </div>
                <div class="content">
                    <form [formGroup]="addApplicationForm" novalidate (ngSubmit)="addAppPost(addApplicationForm)">

                        <div class="col-md-12">
                        <!--select Name-->
                            <div class=" col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label><b>Name of the Application</b></label>
                                    <input type="text" class="form-control" formControlName="name">
                                    <small *ngIf="!addApplicationForm.controls.name.valid" class="text-danger">
                                        Name of the Application is required.
                                    </small>
                                </div>
                            </div>
                            <!--select Base image-->
                            <div class="col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label><b>Base Image</b></label>
                                    <input type="text" class="form-control" formControlName="base_image" >
                                    <small *ngIf="!addApplicationForm.controls.base_image.valid" class="text-danger">
                                        Base Image is required.
                                    </small>
                                </div>
                            </div>


                            <div class=" col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label><b>Device </b></label>
                                    <input list="devices" name="devices" class="form-control" formControlName="device_id" >
                                    <datalist id="devices" >
                                        <option  *ngFor="let dev of listOfDevices | async" value="{{dev.device_vendor}} {{dev.address}}">
                                    </datalist>
                                    <small *ngIf="!addApplicationForm.controls.device_id.valid" class="text-danger">
                                        Device is required.
                                    </small>
                                </div>
                            </div>

                            <div class=" col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label><b>Service IP</b></label>
                                    <input type="text" class="form-control" formControlName="service_ip" >
                                    <small *ngIf="!addApplicationForm.controls.service_ip.valid" class="text-danger">
                                        Service IP is required.
                                    </small>
                                </div>
                            </div>


                            <!--<div class="col-md-12">-->
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label><b>System Information</b></label>
                                    <input type="text" class="form-control" formControlName="system_info" >
                                </div>
                            </div>

                            <div class=" col-sm-6 col-xs-12">
                                <label><b>Capabilities</b></label>
                                <div formArrayName="capabilities" class="panel panel-default">
                                    <div class="panel-body" >
                                        <div *ngFor="let capability of addApplicationForm.controls.capabilities.controls; let i=index">
                                            <div [formGroupName]="i">
                                                <span class="pe-7s-close  pull-right" style="cursor: pointer" *ngIf="addApplicationForm.controls.capabilities.controls.length > 1" (click)="removeCapability(i)"></span>
                                                <div class="form-group col-xs-12">
                                                    <label>Capability {{i + 1}}</label>
                                                    <input type="text" class="form-control" formControlName="capability">
                                                    <small [hidden]="addApplicationForm.controls.capabilities.controls[i].controls.capability.valid" class="text-danger">
                                                        Capability is required
                                                    </small>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="margin-20">
                                    <a (click)="addCapability()" style="cursor: pointer">
                                        Add another Capability +
                                    </a>
                                </div>
                            </div>



                            <div class="col-sm-6 col-xs-12">
                                <label><b>Ports</b></label>
                                <div formArrayName="ports" class="panel panel-default">
                                    <div class="panel-body" >
                                        <div *ngFor="let port of addApplicationForm.controls.ports.controls; let i=index">
                                            <div [formGroupName]="i">
                                                <span class="pe-7s-close  pull-right" style="cursor: pointer" *ngIf="addApplicationForm.controls.ports.controls.length > 1" (click)="removePort(i)"></span>
                                                <div class="form-group col-xs-12">
                                                    <label>Port {{i + 1}}</label>
                                                    <input type="text" class="form-control" formControlName="port">

                                                    <small [hidden]="addApplicationForm.controls.ports.controls[i].controls.port.valid" class="text-danger">
                                                        Port is required
                                                    </small>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="margin-20">
                                    <a (click)="addPort()" style="cursor: pointer">
                                        Add another Port +
                                    </a>
                                </div>
                            </div>


                            <!--odsazeni buttonu-->
                            <div class="col-xs-12"></div>


                        </div>
                        <a *ngIf="!application" routerLink="/applications">
                            <button type="submit" class="btn btn-info btn-fill pull-right" [disabled]="!addApplicationForm.valid">Add Application</button>
                        </a>
                        <a *ngIf="application" routerLink="/applications">
                            <button type="submit" class="btn btn-info btn-fill pull-right" [disabled]="!addApplicationForm.valid">Edit Application</button>
                        </a>
                        <div class="clearfix"></div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
